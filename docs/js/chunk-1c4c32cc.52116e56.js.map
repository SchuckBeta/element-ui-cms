{"version":3,"sources":["webpack:///./src/components/pages/Announcement/components/Form.vue?0d12","webpack:///./src/api/announcement.js","webpack:///./src/mixins/options.js","webpack:///./src/components/pages/Announcement/components/Form.vue?b508","webpack:///src/components/pages/Announcement/components/Form.vue","webpack:///./src/components/pages/Announcement/components/Form.vue?19bf","webpack:///./src/components/pages/Announcement/components/Form.vue?5504","webpack:///./src/mixins/form-add-edit.js"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Form_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Form_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n","url","index","__webpack_exports__","fn","Object","_Users_panhezeng_Workspace_other_public_element_ui_cms_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","listFn","data","updateStoreOptions","computed","mapState","mapGetters","gettersTypes","EMPTY_OPTIONS","created","this","actionsTypes","GET_OPTIONS","beforeDestroy","methods","mapActions","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","label-width","model","formData","rules","formRules","disabled","label","$t","prop","required","value","callback","$$v","$set","expression","show-message","content","height","readonly","on","update:content","$event","placeholder","_l","options","item","key","text","active-value","inactive-value","active-text","inactive-text","file-list","attachment","update:fileList","_e","click","reset","$refs","_v","_s","type","loading","formSubmitLoading","submit","staticRenderFns","Editor","Promise","all","e","then","bind","Formvue_type_script_lang_js_","mixins","form_add_edit","components","MultipleUpload","api","announcement","title","top","components_Formvue_type_script_lang_js_","component","componentNormalizer","__file","modulePages","createNamespacedHelpers","namespaces","pages","MixinForm","MixinOption","resPathOfItem","submitSuccessMessage","afterSubmitBack","Boolean","$route","query","id","apiRetrieve","retrieve","apiUpdate","update","apiCreate","create","_this","$nextTick","mutationsTypes","LOADING_VISIBLE","target","response","getObjectItemByPath","assign","visible","prototype","toString","call","$emit","_Users_panhezeng_Workspace_other_public_element_ui_cms_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_3__","mapMutations","mutationsTypesPages","SET_TABS","pickerOoptions","_ref","arguments","length","undefined","disabledDateEdit","_ref$disabledDate","disabledDate","Date","now","_ref$disabledDateOffs","disabledDateOffset","time","getTime","back","path","back_push","history","$store","state","tabs","$router","push","replace","remove","_submit","_Users_panhezeng_Workspace_other_public_element_ui_cms_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","regeneratorRuntime","mark","_callee","form","res","wrap","_context","prev","next","validate","t0","abrupt","sent","t1","$message","message","t2","stop","_x","apply"],"mappings":"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","file":"js/chunk-1c4c32cc.52116e56.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=style&index=0&lang=less&\"","import listFn from \"@/api/list-fn\";\n\nexport const url = {\n  index: \"/announcement/\"\n};\n\nexport default {\n  url,\n  fn: {\n    ...listFn(url.index)\n  }\n};\n","import {\n  getters as gettersTypes,\n  actions as actionsTypes\n} from \"@/store/config/vuex/types/index\";\nimport { mapState, mapGetters, mapActions } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      updateStoreOptions: false\n    };\n  },\n  computed: {\n    ...mapState([\"options\"]),\n    ...mapGetters([gettersTypes.EMPTY_OPTIONS])\n  },\n  created() {\n    // 如果下拉选项数据为空，则先请求下拉选项数据\n    if (this[gettersTypes.EMPTY_OPTIONS]) this[actionsTypes.GET_OPTIONS]();\n  },\n  beforeDestroy() {\n    if (this.updateStoreOptions) {\n      this[actionsTypes.GET_OPTIONS]();\n    }\n  },\n  methods: {\n    ...mapActions([actionsTypes.GET_OPTIONS])\n  }\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"form\",staticClass:\"form-add-edit\",attrs:{\"label-width\":\"120px\",\"model\":_vm.formData,\"rules\":_vm.formRules,\"disabled\":_vm.disabled}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('page.content.title'),\"prop\":\"title\",\"rules\":_vm.formRules.required}},[_c('el-input',{model:{value:(_vm.formData.title),callback:function ($$v) {_vm.$set(_vm.formData, \"title\", $$v)},expression:\"formData.title\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('page.content.content'),\"prop\":\"content\",\"show-message\":!_vm.formData.content,\"rules\":_vm.formRules.required}},[_c('editor',{attrs:{\"content\":_vm.formData.content,\"height\":200,\"readonly\":_vm.disabled},on:{\"update:content\":function($event){_vm.$set(_vm.formData, \"content\", $event)}}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('page.content.type'),\"prop\":\"type\",\"rules\":_vm.formRules.required}},[_c('el-select',{attrs:{\"placeholder\":_vm.$t('action.pleaseSelect')},model:{value:(_vm.formData.type),callback:function ($$v) {_vm.$set(_vm.formData, \"type\", $$v)},expression:\"formData.type\"}},_vm._l((_vm.options.importance),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.text,\"value\":item.value}})}))],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('page.content.top'),\"prop\":\"top\",\"rules\":_vm.formRules.required}},[_c('el-switch',{attrs:{\"active-value\":1,\"inactive-value\":0,\"active-text\":_vm.$t('action.yes'),\"inactive-text\":_vm.$t('action.no')},model:{value:(_vm.formData.top),callback:function ($$v) {_vm.$set(_vm.formData, \"top\", $$v)},expression:\"formData.top\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('page.content.attachment'),\"prop\":\"attachment\"}},[_c('multiple-upload',{attrs:{\"file-list\":_vm.formData.attachment,\"disabled\":_vm.disabled},on:{\"update:fileList\":function($event){_vm.$set(_vm.formData, \"attachment\", $event)}}})],1),(!_vm.disabled)?_c('el-form-item',{staticClass:\"form-item-btn\"},[_c('el-button',{on:{\"click\":function($event){_vm.reset(_vm.$refs['form'])}}},[_vm._v(_vm._s(_vm.$t('action.reset')))]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.formSubmitLoading},on:{\"click\":function($event){_vm.submit(_vm.$refs['form'])}}},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('action.submit'))+\"\\n    \")])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- 如需定制样式, 在root元素写上 class=\"页面目录名-模块名\", 示例 <root class=\"directory-file\"> -->\n  <el-form class=\"form-add-edit\" label-width=\"120px\"\n           :model=\"formData\" :rules=\"formRules\" ref=\"form\" :disabled=\"disabled\">\n    <el-form-item :label=\"$t('page.content.title')\" prop=\"title\" :rules=\"formRules.required\">\n      <el-input v-model=\"formData.title\"/>\n    </el-form-item>\n    <!-- 富文本编辑器的表单项验证需要设置 :show-message=\"!formData.content\" 才能实现预期效果 -->\n    <el-form-item :label=\"$t('page.content.content')\" prop=\"content\" :show-message=\"!formData.content\"\n                  :rules=\"formRules.required\">\n      <editor :content.sync=\"formData.content\" :height=\"200\" :readonly=\"disabled\"/>\n    </el-form-item>\n    <el-form-item :label=\"$t('page.content.type')\" prop=\"type\" :rules=\"formRules.required\">\n      <el-select v-model=\"formData.type\" :placeholder=\"$t('action.pleaseSelect')\">\n        <el-option\n          v-for=\"item in options.importance\"\n          :key=\"item.value\"\n          :label=\"item.text\"\n          :value=\"item.value\">\n        </el-option>\n      </el-select>\n    </el-form-item>\n    <el-form-item :label=\"$t('page.content.top')\" prop=\"top\" :rules=\"formRules.required\">\n      <el-switch\n        v-model=\"formData.top\"\n        :active-value=\"1\"\n        :inactive-value=\"0\"\n        :active-text=\"$t('action.yes')\"\n        :inactive-text=\"$t('action.no')\">\n      </el-switch>\n    </el-form-item>\n    <el-form-item :label=\"$t('page.content.attachment')\" prop=\"attachment\">\n      <multiple-upload :file-list.sync=\"formData.attachment\"\n                       :disabled=\"disabled\"/>\n    </el-form-item>\n    <el-form-item class=\"form-item-btn\" v-if=\"!disabled\">\n      <el-button @click=\"reset($refs['form'])\">{{$t('action.reset')}}</el-button>\n      <el-button type=\"primary\" :loading=\"formSubmitLoading\" @click=\"submit($refs['form'])\">\n        {{$t('action.submit')}}\n      </el-button>\n    </el-form-item>\n  </el-form>\n</template>\n<script>\nimport MixinFormAddEdit from \"@/mixins/form-add-edit\";\n\n// 该表单相关操作api\nimport api from \"@/api/announcement\";\n\nimport MultipleUpload from \"@/components/common/MultipleUpload\";\n\nconst Editor = () => import(\"@/components/common/Editor\");\n\nexport default {\n  // 如需组件名, 组件名由目录名和文件名构成, 帕斯卡命名法, 示例 name: 'DirectoryFile'\n  mixins: [MixinFormAddEdit],\n  components: { Editor, MultipleUpload },\n  data() {\n    return {\n      api,\n      formData: {\n        title: \"\",\n        content: \"\",\n        type: 1,\n        top: 0,\n        attachment: []\n      }\n    };\n  },\n  // 可以在computed对象内覆写MixinList的computed相关属性, 比如 id, apiCreate...\n  computed: {\n    //      id () { return this.$route.query.other_id }\n  },\n  methods: {\n    // 如果要取消默认提交行为，则return Promise.reject(new Error())\n    //      async beforeSubmit () {\n    //        console.log(this.formData)\n    //        return Promise.reject(new Error())\n    //      }\n  }\n};\n</script>\n<style lang=\"less\">\n/* 所有该模块样式都嵌套在 root class 内, 示例 .directory-file { .form-item-btn {} } */\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=031d9445&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Form.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Form.vue\"\nexport default component.exports","import MixinForm from \"@/mixins/form\";\nimport MixinOption from \"@/mixins/options\";\n\nimport getObjectItemByPath from \"@panhezeng/utils/dist/get-object-item-by-path\";\nimport { pages } from \"@/store/config/pages\";\nimport { mutations as mutationsTypes } from \"@/store/config/vuex/types/index\";\nimport { mutations as mutationsTypesPages } from \"@/store/config/vuex/types/pages\";\nimport { mapMutations, createNamespacedHelpers } from \"vuex\";\nimport { namespaces } from \"@/store/config/vuex/index\";\n\nconst modulePages = createNamespacedHelpers(namespaces.pages);\n\nexport default {\n  mixins: [MixinForm, MixinOption],\n  data() {\n    return {\n      pages,\n      // 从列表项接口返回对象中获取数据的path\n      resPathOfItem: \"data\",\n      // 提交成功后提示消息，如果不需要覆写为''\n      submitSuccessMessage: \"提交成功\",\n      // 提交成功后，返回上一页\n      afterSubmitBack: true\n    };\n  },\n  computed: {\n    disabled() {\n      return Boolean(this.$route.query.disabled);\n    },\n    id() {\n      return this.$route.query.id;\n    },\n    // api相关的默认数据\n    apiRetrieve() {\n      return this.api.fn.retrieve;\n    },\n    apiUpdate() {\n      return this.api.fn.update;\n    },\n    apiCreate() {\n      return this.api.fn.create;\n    }\n  },\n  created() {\n    // 如果有id, 则请求表单初始数据\n    if (this.id) {\n      // 显示加载提示\n      this.$nextTick(function() {\n        this[mutationsTypes.LOADING_VISIBLE]({\n          options: { target: \".page-add-edit .add-edit-main\" }\n        });\n      });\n      this.apiRetrieve(this.id).then(response => {\n        const data = getObjectItemByPath(response, this.resPathOfItem);\n        Object.assign(this.formData, data);\n        // 移除加载提示\n        this.$nextTick(function() {\n          this[mutationsTypes.LOADING_VISIBLE]({ visible: false });\n        });\n        if (\n          Object.prototype.toString.call(this[\"retrieveFinish\"]) ===\n          \"[object Function]\"\n        ) {\n          this[\"retrieveFinish\"]();\n        }\n        this.$emit(\"retrieve-finish\", response);\n      });\n    }\n  },\n  methods: {\n    ...mapMutations([mutationsTypes.LOADING_VISIBLE]),\n    ...modulePages.mapMutations([mutationsTypesPages.SET_TABS]),\n    pickerOoptions({\n      disabledDateEdit,\n      disabledDate = Date.now(),\n      disabledDateOffset = 0\n    } = {}) {\n      if (this.id) {\n        if (disabledDateEdit === undefined) {\n          return {};\n        } else {\n          return {\n            disabledDate(time) {\n              return (\n                time.getTime() <\n                disabledDateEdit + 24 * 60 * 60 * 1000 * disabledDateOffset\n              );\n            }\n          };\n        }\n      } else {\n        return {\n          disabledDate(time) {\n            return (\n              time.getTime() <\n              disabledDate + 24 * 60 * 60 * 1000 * disabledDateOffset\n            );\n          }\n        };\n      }\n    },\n    back() {\n      const path = this.$route.path;\n      if (\n        this.$route.query.back_push ||\n        history.length < 3 ||\n        this.$store.state.pages.tabs.length < 2\n      ) {\n        this.$router.push({\n          path: path.replace(/(\\/add|\\/edit).*$/, \"\"),\n          query: this.$route.query\n        });\n      } else {\n        this.$router.back();\n      }\n      this[mutationsTypesPages.SET_TABS]({ path, remove: true });\n    },\n    async submit(form) {\n      try {\n        if (form) {\n          await form.validate();\n        }\n        this.formSubmitLoading = true;\n        // 如果有提交前拦截异步函数，则执行\n        if (\n          Object.prototype.toString.call(this[\"beforeSubmit\"]) ===\n          \"[object Function]\"\n        ) {\n          // 传入表单数据，可以对提交数据进行预处理，如果函数return Promise.reject(new Error())，则不执行之后代码\n          // 除了这种方式，还可以在api方法那里对提交数据进行预处理，或者不使用此submit函数\n          try {\n            await this[\"beforeSubmit\"]();\n          } catch (e) {\n            this.formSubmitLoading = false;\n            return false;\n          }\n        }\n        let res = {};\n        if (this.id) {\n          res = await this.apiUpdate(this.id, this.formData);\n        } else {\n          res = await this.apiCreate(this.formData);\n        }\n        // 如果有提交后拦截异步函数，则执行\n        if (\n          Object.prototype.toString.call(this[\"afterSubmit\"]) ===\n          \"[object Function]\"\n        ) {\n          try {\n            await this[\"afterSubmit\"](res);\n          } catch (e) {\n            this.formSubmitLoading = false;\n            return false;\n          }\n        }\n        // 提交成功事件通知\n        this.$emit(\"success\", res);\n        if (this.submitSuccessMessage)\n          this.$message({\n            message: this.submitSuccessMessage,\n            type: \"success\"\n          });\n        if (this.afterSubmitBack) this.back();\n        this.formSubmitLoading = false;\n      } catch (e) {\n        this.formSubmitLoading = false;\n        return false;\n      }\n    }\n  }\n};\n"],"sourceRoot":""}