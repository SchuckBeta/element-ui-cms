{"version":3,"sources":["webpack:///./src/components/pages/Banner/components/Form.vue?4006","webpack:///./node_modules/@panhezeng/utils/dist/get-array-item-by-value.js","webpack:///./src/mixins/options.js","webpack:///./src/api/banner.js","webpack:///./src/components/common/ResourceSearch.vue?1f31","webpack:///src/components/common/ResourceSearch.vue","webpack:///./src/components/common/ResourceSearch.vue?3c12","webpack:///./src/components/common/ResourceSearch.vue?9491","webpack:///./src/mixins/form-add-edit.js","webpack:///./src/components/pages/Banner/components/Form.vue?a5da","webpack:///src/components/pages/Banner/components/Form.vue","webpack:///./src/components/pages/Banner/components/Form.vue?1fa1","webpack:///./src/components/pages/Banner/components/Form.vue?2e84","webpack:///./src/components/common/ResourceSearch.vue?f7b4","webpack:///./src/utils/index.js","webpack:///src/components/common/SingleUpload.vue","webpack:///./src/components/common/SingleUpload.vue","webpack:///./src/components/common/SingleUpload.vue?af44"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Form_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Form_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n","e","t","module","exports","window","r","o","i","l","call","m","c","d","Object","defineProperty","enumerable","get","Symbol","toStringTag","value","__esModule","create","bind","default","prototype","hasOwnProperty","p","s","5","find","__webpack_exports__","data","updateStoreOptions","computed","_Users_panhezeng_Workspace_other_public_element_ui_cms_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","mapState","mapGetters","gettersTypes","EMPTY_OPTIONS","created","this","actionsTypes","GET_OPTIONS","beforeDestroy","methods","mapActions","_api_list_fn__WEBPACK_IMPORTED_MODULE_0__","url","index","fn","listFn","render","_vm","_h","$createElement","_c","_self","_b","staticClass","class","id-show","resourceId","lock-type","lockType","attrs","clearable","trigger-on-focus","value-key","fetch-suggestions","fetchSuggestions","on","select","selectSuggestion","model","callback","$$v","resourceTitle","expression","$attrs","slot","_v","_s","selectedType","text","placeholder","$t","change","selectedTypeUpdate","resourceType","_l","item","key","label","_e","staticRenderFns","ResourceSearchvue_type_script_lang_js_","name","inheritAttrs","props","type","Boolean","includeType","Array","id","title","String","resource","idKey","titleKey","objectSpread","external_Vuex_","resourceTypeOption","_this","length","options","resource_type","filter","option","utils","watch","immediate","handler","val","Number","undefined","resourceValid","toString","is_active","status","_fetchSuggestions","asyncToGenerator","regeneratorRuntime","mark","_callee","queryString","cb","res","_this2","wrap","_context","prev","next","common","word","sent","results","stop","_x","_x2","apply","arguments","$emit","common_ResourceSearchvue_type_script_lang_js_","component","componentNormalizer","__file","modulePages","createNamespacedHelpers","namespaces","pages","mixins","MixinForm","MixinOption","resPathOfItem","submitSuccessMessage","afterSubmitBack","disabled","$route","query","apiRetrieve","api","retrieve","apiUpdate","update","apiCreate","$nextTick","mutationsTypes","LOADING_VISIBLE","target","then","response","getObjectItemByPath","assign","formData","visible","_Users_panhezeng_Workspace_other_public_element_ui_cms_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_3__","mapMutations","mutationsTypesPages","SET_TABS","pickerOoptions","_ref","disabledDateEdit","_ref$disabledDate","disabledDate","Date","now","_ref$disabledDateOffs","disabledDateOffset","time","getTime","back","path","back_push","history","$store","state","tabs","$router","push","replace","remove","submit","_submit","_Users_panhezeng_Workspace_other_public_element_ui_cms_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","form","validate","formSubmitLoading","t0","abrupt","t1","$message","message","t2","ref","label-width","rules","formRules","prop","required","$set","show-message","picture","uploadImg","update:url","$event","clearValidate","$refs","link_type","noFalse","resource_id","update:type","update:id","update:title","click","reset","loading","Formvue_type_script_lang_js_","form_add_edit","components","SingleUpload","ResourceSearch","banner","client","order","beforeSubmit","_beforeSubmit","components_Formvue_type_script_lang_js_","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ResourceSearch_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ResourceSearch_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","getOptionByValue","array","getArrayItemByValue","getTextByValue","getTreeOptionByValue","childrenKey","recursive","children","el_single_upload_min_default","a","upload","elUploadCloud","SingleUploadvue_type_script_lang_js_","common_SingleUploadvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-073c38aa.3740b313.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=style&index=0&lang=less&\"","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"getArrayItemByValue\",[],t):\"object\"==typeof exports?exports.getArrayItemByValue=t():e.getArrayItemByValue=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=5)}({5:function(e,t){e.exports=function(e,t,r){return e.find(function(e){return r?e[r]===t:e===t})}}})});","import {\n  getters as gettersTypes,\n  actions as actionsTypes\n} from \"@/store/config/vuex/types/index\";\nimport { mapState, mapGetters, mapActions } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      updateStoreOptions: false\n    };\n  },\n  computed: {\n    ...mapState([\"options\"]),\n    ...mapGetters([gettersTypes.EMPTY_OPTIONS])\n  },\n  created() {\n    // 如果下拉选项数据为空，则先请求下拉选项数据\n    if (this[gettersTypes.EMPTY_OPTIONS]) this[actionsTypes.GET_OPTIONS]();\n  },\n  beforeDestroy() {\n    if (this.updateStoreOptions) {\n      this[actionsTypes.GET_OPTIONS]();\n    }\n  },\n  methods: {\n    ...mapActions([actionsTypes.GET_OPTIONS])\n  }\n};\n","import listFn from \"@/api/list-fn\";\n\nexport const url = {\n  index: \"/banner/\"\n};\n\nexport default {\n  url,\n  fn: listFn(url.index)\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-autocomplete',_vm._b({staticClass:\"resource-search\",class:{'id-show':_vm.resourceId,'lock-type':_vm.lockType},attrs:{\"clearable\":\"\",\"trigger-on-focus\":false,\"value-key\":\"title\",\"fetch-suggestions\":_vm.fetchSuggestions},on:{\"select\":_vm.selectSuggestion},model:{value:(_vm.resourceTitle),callback:function ($$v) {_vm.resourceTitle=$$v},expression:\"resourceTitle\"}},'el-autocomplete',_vm.$attrs,false),[(_vm.lockType)?_c('span',{staticClass:\"resource-type-lock\",attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(_vm._s(_vm.selectedType.text))]):_c('el-select',_vm._b({staticClass:\"resource-type\",attrs:{\"slot\":\"prepend\",\"placeholder\":_vm.$t('action.pleaseSelect')},on:{\"change\":_vm.selectedTypeUpdate},slot:\"prepend\",model:{value:(_vm.resourceType),callback:function ($$v) {_vm.resourceType=$$v},expression:\"resourceType\"}},'el-select',_vm.$attrs,false),[_vm._l((_vm.resourceTypeOption),function(item){return [_c('el-option',{key:item.value,attrs:{\"label\":item.text,\"value\":item.value}})]})],2),_c('i',{staticClass:\"el-input__icon el-icon-search\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"}),(_vm.resourceId)?_c('span',{staticClass:\"resource-id\",attrs:{\"slot\":\"append\"},slot:\"append\"},[_vm._v(\"ID: \"),_c('strong',[_vm._v(_vm._s(_vm.resourceId))])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-autocomplete\n    class=\"resource-search\"\n    :class=\"{'id-show':resourceId,'lock-type':lockType}\"\n    clearable\n    :trigger-on-focus=\"false\"\n    value-key=\"title\"\n    v-model=\"resourceTitle\"\n    :fetch-suggestions=\"fetchSuggestions\"\n    @select=\"selectSuggestion\"\n    v-bind=\"$attrs\"\n  >\n    <span class=\"resource-type-lock\" slot=\"prepend\" v-if=\"lockType\">{{selectedType.text}}</span>\n    <el-select class=\"resource-type\" slot=\"prepend\" :placeholder=\"$t('action.pleaseSelect')\"\n               v-model=\"resourceType\" @change=\"selectedTypeUpdate\"\n               v-bind=\"$attrs\"\n               v-else>\n      <template v-for=\"item in resourceTypeOption\">\n        <el-option\n          :key=\"item.value\"\n          :label=\"item.text\"\n          :value=\"item.value\"/>\n      </template>\n    </el-select>\n    <i slot=\"prefix\" class=\"el-input__icon el-icon-search\"></i>\n    <span slot=\"append\" class=\"resource-id\" v-if=\"resourceId\">ID: <strong>{{resourceId}}</strong></span>\n  </el-autocomplete>\n\n</template>\n<script>\nimport apiCommon from \"@/api/common\";\nimport { mapState } from \"vuex\";\nimport { getOptionByValue } from \"@/utils\";\n\nexport default {\n  name: \"ResourceSearch\",\n  inheritAttrs: false,\n  props: {\n    // 是否锁定资源类型\n    lockType: {\n      type: Boolean,\n      default: false\n    },\n    // 默认可选所有资源类型，如果数组有值，数组内容必须为类型id\n    includeType: {\n      type: Array,\n      default() {\n        return [];\n      }\n    },\n    // 默认资源类型\n    type: {},\n    // 默认资源id\n    id: {},\n    // 默认资源title\n    title: String,\n    // 用户选中的资源数据对象，{}表示可以传任意值\n    resource: {},\n    // 从资源数据对象中获得id的key，后端无法保证数据对象的key是id的值就是资源id，有可能是其他key\n    idKey: {\n      type: String,\n      default: \"id\"\n    },\n    // 从资源数据对象中获得title的key，同上原因\n    titleKey: {\n      type: String,\n      default: \"title\"\n    }\n  },\n  data() {\n    return {\n      resourceId: 0,\n      resourceTitle: \"\",\n      resourceType: 1\n    };\n  },\n  computed: {\n    ...mapState([\"options\"]),\n    resourceTypeOption() {\n      if (this.includeType.length) {\n        return this.options.resource_type.filter(option =>\n          this.includeType.find(id => option.value === id)\n        );\n      }\n      return this.options.resource_type;\n    },\n    selectedType() {\n      return getOptionByValue(\n        this.options.resource_type,\n        this.resourceType,\n        \"value\"\n      );\n    }\n  },\n  watch: {\n    type: {\n      immediate: true,\n      handler(val) {\n        if (val) this.resourceType = Number(val);\n      }\n    },\n    id: {\n      immediate: true,\n      handler(val) {\n        if (val) this.resourceId = Number(val);\n      }\n    },\n    title: {\n      immediate: true,\n      handler(val) {\n        if (val) this.resourceTitle = val;\n      }\n    },\n    resource: {\n      immediate: true,\n      handler(val) {\n        if (val !== undefined) this.selectSuggestion(val);\n      }\n    },\n    resourceTitle: {\n      handler(val) {\n        if (!val) {\n          this.selectSuggestion();\n        }\n      }\n    }\n  },\n  methods: {\n    resourceValid(item) {\n      return (\n        Object.prototype.toString.call(item) === \"[object Object]\" &&\n        item[this.idKey] &&\n        item[this.titleKey] &&\n        item.resource_type &&\n        item.is_active &&\n        item.status\n      );\n    },\n    // 搜索建议数据\n    async fetchSuggestions(queryString, cb) {\n      let data = [];\n      if (queryString) {\n        const res = await apiCommon.fn.resource({\n          word: queryString,\n          type: this.resourceType\n        });\n        data =\n          res.data &&\n          res.data[this.selectedType.key] &&\n          res.data[this.selectedType.key].results;\n        if (Object.prototype.toString.call(data) === \"[object Array]\") {\n          data = data.filter(item => this.resourceValid(item));\n          if (data.length) {\n            const item = data[0];\n            // 如果用户输入了关键字，并且完整匹配搜索结果中第一项，则帮用户默认选择此结果\n            if (queryString && queryString === item[this.titleKey]) {\n              this.selectSuggestion(item);\n            }\n          }\n        } else {\n          data = [];\n        }\n      }\n      // 显示搜索结果列表\n      cb(data);\n    },\n    // 选中一项搜索建议数据\n    selectSuggestion(item) {\n      if (this.resourceValid(item)) {\n        this.resourceId = item[this.idKey];\n        this.resourceTitle = item[this.titleKey];\n      } else {\n        this.resourceId = 0;\n        this.resourceTitle = \"\";\n        item = null;\n      }\n      this.$emit(\"update:id\", this.resourceId);\n      this.$emit(\"update:title\", this.resourceTitle);\n      this.$emit(\"update:resource\", item);\n    },\n    // 选中一项资源类型\n    selectedTypeUpdate(val) {\n      if (val) this.resourceType = Number(val);\n      this.$emit(\"update:type\", this.resourceType);\n    }\n  }\n};\n</script>\n<style lang=\"less\">\n.resource-search {\n  width: 100%;\n  .resource-type {\n    .el-input {\n      width: 120px;\n    }\n  }\n  &:not(.lock-type) {\n    .el-input-group__prepend {\n      background-color: #fff;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceSearch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceSearch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResourceSearch.vue?vue&type=template&id=2243ecbe&\"\nimport script from \"./ResourceSearch.vue?vue&type=script&lang=js&\"\nexport * from \"./ResourceSearch.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ResourceSearch.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ResourceSearch.vue\"\nexport default component.exports","import MixinForm from \"@/mixins/form\";\nimport MixinOption from \"@/mixins/options\";\n\nimport getObjectItemByPath from \"@panhezeng/utils/dist/get-object-item-by-path\";\nimport { pages } from \"@/store/config/pages\";\nimport { mutations as mutationsTypes } from \"@/store/config/vuex/types/index\";\nimport { mutations as mutationsTypesPages } from \"@/store/config/vuex/types/pages\";\nimport { mapMutations, createNamespacedHelpers } from \"vuex\";\nimport { namespaces } from \"@/store/config/vuex/index\";\n\nconst modulePages = createNamespacedHelpers(namespaces.pages);\n\nexport default {\n  mixins: [MixinForm, MixinOption],\n  data() {\n    return {\n      pages,\n      // 从列表项接口返回对象中获取数据的path\n      resPathOfItem: \"data\",\n      // 提交成功后提示消息，如果不需要覆写为''\n      submitSuccessMessage: \"提交成功\",\n      // 提交成功后，返回上一页\n      afterSubmitBack: true\n    };\n  },\n  computed: {\n    disabled() {\n      return Boolean(this.$route.query.disabled);\n    },\n    id() {\n      return this.$route.query.id;\n    },\n    // api相关的默认数据\n    apiRetrieve() {\n      return this.api.fn.retrieve;\n    },\n    apiUpdate() {\n      return this.api.fn.update;\n    },\n    apiCreate() {\n      return this.api.fn.create;\n    }\n  },\n  created() {\n    // 如果有id, 则请求表单初始数据\n    if (this.id) {\n      // 显示加载提示\n      this.$nextTick(function() {\n        this[mutationsTypes.LOADING_VISIBLE]({\n          options: { target: \".page-add-edit .add-edit-main\" }\n        });\n      });\n      this.apiRetrieve(this.id).then(response => {\n        const data = getObjectItemByPath(response, this.resPathOfItem);\n        Object.assign(this.formData, data);\n        // 移除加载提示\n        this.$nextTick(function() {\n          this[mutationsTypes.LOADING_VISIBLE]({ visible: false });\n        });\n        if (\n          Object.prototype.toString.call(this[\"retrieveFinish\"]) ===\n          \"[object Function]\"\n        ) {\n          this[\"retrieveFinish\"]();\n        }\n        this.$emit(\"retrieve-finish\", response);\n      });\n    }\n  },\n  methods: {\n    ...mapMutations([mutationsTypes.LOADING_VISIBLE]),\n    ...modulePages.mapMutations([mutationsTypesPages.SET_TABS]),\n    pickerOoptions({\n      disabledDateEdit,\n      disabledDate = Date.now(),\n      disabledDateOffset = 0\n    } = {}) {\n      if (this.id) {\n        if (disabledDateEdit === undefined) {\n          return {};\n        } else {\n          return {\n            disabledDate(time) {\n              return (\n                time.getTime() <\n                disabledDateEdit + 24 * 60 * 60 * 1000 * disabledDateOffset\n              );\n            }\n          };\n        }\n      } else {\n        return {\n          disabledDate(time) {\n            return (\n              time.getTime() <\n              disabledDate + 24 * 60 * 60 * 1000 * disabledDateOffset\n            );\n          }\n        };\n      }\n    },\n    back() {\n      const path = this.$route.path;\n      if (\n        this.$route.query.back_push ||\n        history.length < 3 ||\n        this.$store.state.pages.tabs.length < 2\n      ) {\n        this.$router.push({\n          path: path.replace(/(\\/add|\\/edit).*$/, \"\"),\n          query: this.$route.query\n        });\n      } else {\n        this.$router.back();\n      }\n      this[mutationsTypesPages.SET_TABS]({ path, remove: true });\n    },\n    async submit(form) {\n      try {\n        if (form) {\n          await form.validate();\n        }\n        this.formSubmitLoading = true;\n        // 如果有提交前拦截异步函数，则执行\n        if (\n          Object.prototype.toString.call(this[\"beforeSubmit\"]) ===\n          \"[object Function]\"\n        ) {\n          // 传入表单数据，可以对提交数据进行预处理，如果函数return Promise.reject(new Error())，则不执行之后代码\n          // 除了这种方式，还可以在api方法那里对提交数据进行预处理，或者不使用此submit函数\n          try {\n            await this[\"beforeSubmit\"]();\n          } catch (e) {\n            this.formSubmitLoading = false;\n            return false;\n          }\n        }\n        let res = {};\n        if (this.id) {\n          res = await this.apiUpdate(this.id, this.formData);\n        } else {\n          res = await this.apiCreate(this.formData);\n        }\n        // 如果有提交后拦截异步函数，则执行\n        if (\n          Object.prototype.toString.call(this[\"afterSubmit\"]) ===\n          \"[object Function]\"\n        ) {\n          try {\n            await this[\"afterSubmit\"](res);\n          } catch (e) {\n            this.formSubmitLoading = false;\n            return false;\n          }\n        }\n        // 提交成功事件通知\n        this.$emit(\"success\", res);\n        if (this.submitSuccessMessage)\n          this.$message({\n            message: this.submitSuccessMessage,\n            type: \"success\"\n          });\n        if (this.afterSubmitBack) this.back();\n        this.formSubmitLoading = false;\n      } catch (e) {\n        this.formSubmitLoading = false;\n        return false;\n      }\n    }\n  }\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"form\",staticClass:\"form-add-edit\",attrs:{\"label-width\":\"120px\",\"model\":_vm.formData,\"rules\":_vm.formRules,\"disabled\":_vm.disabled}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('page.content.title'),\"prop\":\"title\",\"rules\":_vm.formRules.required}},[_c('el-input',{model:{value:(_vm.formData.title),callback:function ($$v) {_vm.$set(_vm.formData, \"title\", $$v)},expression:\"formData.title\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('page.content.client'),\"prop\":\"client\",\"rules\":_vm.formRules.required}},[_c('el-select',{attrs:{\"placeholder\":_vm.$t('action.pleaseSelect')},model:{value:(_vm.formData.client),callback:function ($$v) {_vm.$set(_vm.formData, \"client\", $$v)},expression:\"formData.client\"}},_vm._l((_vm.options.client),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.text,\"value\":item.value}})}))],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('page.content.order'),\"prop\":\"order\",\"rules\":_vm.formRules.required}},[_c('el-input-number',{model:{value:(_vm.formData.order),callback:function ($$v) {_vm.$set(_vm.formData, \"order\", $$v)},expression:\"formData.order\"}})],1),_c('el-form-item',{staticClass:\"single-upload-form-item\",attrs:{\"label\":_vm.$t('page.content.picture'),\"prop\":\"picture\",\"show-message\":!_vm.formData.picture,\"rules\":_vm.formRules.uploadImg}},[_c('single-upload',{attrs:{\"url\":_vm.formData.picture,\"disabled\":_vm.disabled},on:{\"update:url\":function($event){_vm.$set(_vm.formData, \"picture\", $event)}}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('page.content.link'),\"prop\":\"link_type\",\"rules\":_vm.formRules.required}},[_c('el-radio-group',{on:{\"change\":function($event){_vm.clearValidate(_vm.$refs['form'],['url','resource_id'])}},model:{value:(_vm.formData.link_type),callback:function ($$v) {_vm.$set(_vm.formData, \"link_type\", $$v)},expression:\"formData.link_type\"}},_vm._l((_vm.options.link_type),function(item){return _c('el-radio',{key:item.value,attrs:{\"label\":item.value}},[_vm._v(_vm._s(item.text))])}))],1),(_vm.formData.link_type===0)?_c('el-form-item',{attrs:{\"label\":\"\",\"prop\":\"url\",\"rules\":_vm.formRules.url}},[_c('el-input',{model:{value:(_vm.formData.url),callback:function ($$v) {_vm.$set(_vm.formData, \"url\", $$v)},expression:\"formData.url\"}})],1):_c('el-form-item',{attrs:{\"label\":_vm.$t('page.content.selectResource'),\"prop\":\"resource_id\",\"rules\":_vm.formRules.noFalse}},[_c('resource-search',{attrs:{\"disabled\":_vm.disabled,\"type\":_vm.formData.resource_type,\"id\":_vm.formData.resource_id,\"title\":_vm.formData.resource.title},on:{\"update:type\":function($event){_vm.$set(_vm.formData, \"resource_type\", $event)},\"update:id\":function($event){_vm.$set(_vm.formData, \"resource_id\", $event)},\"update:title\":function($event){_vm.$set(_vm.formData.resource, \"title\", $event)}}})],1),(!_vm.disabled)?_c('el-form-item',{staticClass:\"form-item-btn\"},[_c('el-button',{on:{\"click\":function($event){_vm.reset(_vm.$refs['form'])}}},[_vm._v(_vm._s(_vm.$t('action.reset')))]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.formSubmitLoading},on:{\"click\":function($event){_vm.submit(_vm.$refs['form'])}}},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('action.submit'))+\"\\n    \")])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- 如需定制样式, 在root元素写上 class=\"页面目录名-模块名\", 示例 <root class=\"directory-file\"> -->\n  <el-form class=\"form-add-edit\" label-width=\"120px\"\n           :model=\"formData\" :rules=\"formRules\" ref=\"form\" :disabled=\"disabled\">\n    <el-form-item :label=\"$t('page.content.title')\" prop=\"title\" :rules=\"formRules.required\">\n      <el-input v-model=\"formData.title\"/>\n    </el-form-item>\n    <el-form-item  :label=\"$t('page.content.client')\" prop=\"client\" :rules=\"formRules.required\">\n      <el-select v-model=\"formData.client\" :placeholder=\"$t('action.pleaseSelect')\">\n        <el-option\n          v-for=\"item in options.client\"\n          :key=\"item.value\"\n          :label=\"item.text\"\n          :value=\"item.value\">\n        </el-option>\n      </el-select>\n    </el-form-item>\n    <el-form-item :label=\"$t('page.content.order')\" prop=\"order\" :rules=\"formRules.required\">\n      <el-input-number v-model=\"formData.order\"/>\n    </el-form-item>\n    <el-form-item :label=\"$t('page.content.picture')\" prop=\"picture\"\n                  :show-message=\"!formData.picture\" :rules=\"formRules.uploadImg\"\n                  class=\"single-upload-form-item\">\n      <single-upload :url.sync=\"formData.picture\" :disabled=\"disabled\"/>\n    </el-form-item>\n    <el-form-item :label=\"$t('page.content.link')\" prop=\"link_type\" :rules=\"formRules.required\">\n      <el-radio-group v-model=\"formData.link_type\" @change=\"clearValidate($refs['form'],['url','resource_id'])\">\n        <el-radio v-for=\"item in options.link_type\" :key=\"item.value\" :label=\"item.value\">{{item.text}}</el-radio>\n      </el-radio-group>\n    </el-form-item>\n    <el-form-item label=\"\" prop=\"url\" :rules=\"formRules.url\" v-if=\"formData.link_type===0\">\n      <el-input v-model=\"formData.url\"/>\n    </el-form-item>\n    <el-form-item :label=\"$t('page.content.selectResource')\"  prop=\"resource_id\" :rules=\"formRules.noFalse\" v-else>\n      <resource-search :disabled=\"disabled\"\n                       :type.sync=\"formData.resource_type\"\n                       :id.sync=\"formData.resource_id\"\n                       :title.sync=\"formData.resource.title\"/>\n    </el-form-item>\n    <el-form-item class=\"form-item-btn\" v-if=\"!disabled\">\n      <el-button @click=\"reset($refs['form'])\">{{$t('action.reset')}}</el-button>\n      <el-button type=\"primary\" :loading=\"formSubmitLoading\" @click=\"submit($refs['form'])\">\n        {{$t('action.submit')}}\n      </el-button>\n    </el-form-item>\n  </el-form>\n</template>\n<script>\nimport MixinFormAddEdit from \"@/mixins/form-add-edit\";\n\n// 该表单相关操作api\nimport api from \"@/api/banner\";\nimport SingleUpload from \"@/components/common/SingleUpload\";\nimport ResourceSearch from \"@/components/common/ResourceSearch\";\n\nexport default {\n  // 如需组件名, 组件名由目录名和文件名构成, 帕斯卡命名法, 示例 name: 'DirectoryFile'\n  mixins: [MixinFormAddEdit],\n  components: { SingleUpload, ResourceSearch },\n  data() {\n    return {\n      api,\n      formData: {\n        title: \"\",\n        client: 0,\n        order: 0,\n        // 外链还是资源\n        link_type: 0,\n        url: \"\",\n        // 资源类型(后端要，表单提交接口必须有)\n        resource_type: 1,\n        // 选中的资源(后端要，表单提交接口必须有)\n        resource_id: 0,\n        // 选中的资源(前端要，组件显示值)\n        resource: {}\n      }\n    };\n  },\n  // 可以在computed对象内覆写MixinList的computed相关属性, 比如 id, apiCreate...\n  computed: {\n    //      id () { return this.$route.query.other_id }\n  },\n  methods: {\n    // 如果要取消默认提交行为，则return Promise.reject(new Error())\n    async beforeSubmit() {\n      if (this.formData.link_type) {\n        this.formData.url = \"\";\n      } else {\n        this.formData.resource = {};\n        this.formData.resource_id = 0;\n        this.formData.resource_type = 1;\n      }\n      //  return Promise.reject(new Error())\n    }\n  }\n};\n</script>\n<style lang=\"less\">\n/* 所有该模块样式都嵌套在 root class 内, 示例 .directory-file { .form-item-btn {} } */\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=4066a9d2&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Form.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Form.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceSearch.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceSearch.vue?vue&type=style&index=0&lang=less&\"","import getArrayItemByValue from \"@panhezeng/utils/dist/get-array-item-by-value\";\n\n/**\n * @param array 需要遍历的数组\n * @param value 返回与value相等的项\n * @param key 如果有key，则表示数组项是对象，则取该对象命名为此key的属性值和value比较\n */\nexport function getOptionByValue(array, value, key) {\n  const item = getArrayItemByValue(array, value, key);\n  if (Object.prototype.toString.call(item) === \"[object Object]\") {\n    return item;\n  }\n  return {};\n}\n\n/**\n * @param array 需要遍历的数组\n * @param value 返回与value相等的项\n * @param key 如果有key，则表示数组项是对象，则取该对象命名为此key的属性值和value比较\n */\nexport function getTextByValue(array, value, key) {\n  const item = getOptionByValue(array, value, key);\n  return item.text || \"\";\n}\n\n/**\n * @param array 需要遍历的数组\n * @param key 取树节点对象命名为此key的属性值和value比较\n * @param value 返回与value相等的项\n * @param childrenKey 获得子树的节点名\n */\nexport function getTreeOptionByValue(\n  array,\n  key,\n  value,\n  childrenKey = \"children\"\n) {\n  function recursive(data) {\n    for (let i = data.length; i--; ) {\n      const item = data[i];\n      if (Object.prototype.toString.call(item) === \"[object Object]\") {\n        if (item[key] === value) {\n          return item;\n        } else {\n          const children = item[childrenKey];\n          if (\n            Object.prototype.toString.call(children) === \"[object Array]\" &&\n            children.length\n          ) {\n            return recursive(children);\n          } else {\n            return {};\n          }\n        }\n      } else {\n        return {};\n      }\n    }\n  }\n\n  if (\n    Object.prototype.toString.call(array) === \"[object Array]\" &&\n    array.length\n  ) {\n    return recursive(array);\n  }\n  return {};\n}\n","<script>\nimport ElSingleUpload from \"@panhezeng/el-single-upload\";\n\nimport api from \"@/api/upload\";\n\nObject.assign(ElSingleUpload.props.upload, {\n  required: false,\n  default: api.fn.elUploadCloud\n});\n\nexport default ElSingleUpload;\n</script>\n","var render, staticRenderFns\nimport script from \"./SingleUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./SingleUpload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"SingleUpload.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleUpload.vue?vue&type=script&lang=js&\""],"sourceRoot":""}